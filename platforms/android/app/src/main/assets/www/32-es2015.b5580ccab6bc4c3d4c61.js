(window.webpackJsonp=window.webpackJsonp||[]).push([[32],{"c+Z3":function(e,t,i){"use strict";i.r(t),i.d(t,"VenueProfilePageModule",function(){return O});var n=i("ofXK"),o=i("3Pt+"),s=i("TEn/"),a=i("tyNb"),r=i("mrSG"),l=i("a/9d"),c=i("8RPc"),h=i("2Rin"),d=i("wd/R"),g=i("fXoL");const u=["searchbar"];function m(e,t){if(1&e){const e=g.Pb();g.Ob(0,"div",15),g.Wb("click",function(){return g.mc(e),g.Yb().cover()}),g.Mb(1,"ion-icon",16),g.Ob(2,"p"),g.rc(3),g.Mb(4,"br"),g.rc(5),g.Nb(),g.Nb()}if(2&e){const e=g.Yb();g.Ab(3),g.tc("",e.util.translate("Upload your")," "),g.Ab(2),g.tc(" ",e.util.translate("cover image here"),"")}}const b=function(e){return{"background-image":e}};function p(e,t){if(1&e){const e=g.Pb();g.Ob(0,"div",17),g.Wb("click",function(){return g.mc(e),g.Yb().cover()}),g.Nb()}if(2&e){const e=g.Yb();g.ec("ngStyle",g.jc(1,b,"url("+e.api.mediaURL+e.coverImage+"),url(assets/placeholder.jpg)"))}}const C=[{path:"",component:(()=>{class e{constructor(e,t,i,n,o,s){this.actionSheetController=e,this.camera=t,this.util=i,this.api=n,this.navCtrl=o,this.router=s,this.image="",this.name="",this.address="",this.descritions="",this.haveData=!1,this.dishPrice="",this.time="",this.phone="",this.status="";const a={id:localStorage.getItem("uid")};this.api.post("stores/getByUid",a).then(e=>{if(console.log("*******************",e),e&&200===e.status&&e.data&&e.data.length){const t=e.data[0];if(this.name=t.name,this.address=t.address,this.dishPrice=t.dish,this.phone=t.mobile,this.openTime=t.open_time,this.closeTime=t.close_time,this.latitude=t.lat,this.longitude=t.lng,this.time=t.time,this.descritions=t.descriptions,this.coverImage=t.cover,this.id=t.id,this.cusine=t.cusine&&""!==t.cusine?JSON.parse(t.cusine):[],this.isClosed=t.isClosed,t.images){const e=JSON.parse(t.images);console.log("images======>>>",e),e[0]&&(this.image1=e[0]),e[1]&&(this.image2=e[1]),e[2]&&(this.image3=e[2]),e[3]&&(this.image4=e[3]),e[4]&&(this.image5=e[4]),e[5]&&(this.image6=e[5])}}else localStorage.clear(),this.navCtrl.navigateRoot(["/login"])},e=>{console.log(e)})}ngOnInit(){}updateSearch(){}updateVenue(){const e=[this.image1?this.image1:"",this.image2?this.image2:"",this.image3?this.image3:"",this.image4?this.image4:"",this.image5?this.image5:"",this.image6?this.image6:""];this.openTime=d(this.openTime).format("HH:mm"),this.closeTime=d(this.closeTime).format("HH:mm"),"Invalid date"===this.openTime&&(this.openTime="10:00"),"Invalid date"===this.closeTime&&(this.closeTime="22:00"),(new google.maps.Geocoder).geocode({address:this.address},(t,i)=>{if(console.log(t,i),"OK"!==i||!t||!t.length)return this.util.errorToast(this.util.translate("Something went wrong")),!1;{this.latitude=t[0].geometry.location.lat(),this.longitude=t[0].geometry.location.lng(),console.log("-----\x3e",this.latitude,this.longitude);const i={name:this.name,address:this.address,descriptions:this.descritions,lat:this.latitude,lng:this.longitude,cover:this.coverImage,open_time:this.openTime,close_time:this.closeTime,id:this.id,dish:this.dishPrice,time:this.time,cusine:JSON.stringify(this.cusine),images:JSON.stringify(e),mobile:this.phone,isClosed:this.isClosed};this.util.show(),console.log("param",i),this.api.post("stores/editList",i).then(e=>{console.log(e),this.util.hide(),e&&200===e.status?this.navCtrl.back():(this.util.hide(),this.util.errorToast(this.util.translate("Something went wrong")))},e=>{this.util.hide(),console.log(e),this.util.errorToast(this.util.translate("Something went wrong"))}).catch(e=>{this.util.hide(),console.log(e),this.util.errorToast(this.util.translate("Something went wrong"))})}})}submit(){return console.log("cusine",this.cusine),""!==this.name&&""!==this.address&&""!==this.descritions&&""!==this.dishPrice&&""!==this.time&&this.cusine&&this.cusine.length&&""!==this.openTime&&""!==this.closeTime&&this.openTime&&this.closeTime&&""!==this.phone&&this.phone?this.coverImage&&""!==this.coverImage?(console.log("update"),void this.updateVenue()):(this.util.errorToast(this.util.translate("Please add your cover image")),!1):(this.util.errorToast(this.util.translate("All Fields are required")),!1)}cover(){return Object(r.a)(this,void 0,void 0,function*(){const e=yield this.actionSheetController.create({header:this.util.translate("Choose from"),buttons:[{text:this.util.translate("Camera"),icon:"camera",handler:()=>{console.log("Delete clicked"),this.opemCamera("camera")}},{text:this.util.translate("Gallery"),icon:"image",handler:()=>{console.log("Share clicked"),this.opemCamera("gallery")}},{text:this.util.translate("Cancel"),icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield e.present()})}others(e){return Object(r.a)(this,void 0,void 0,function*(){console.log("num",e);const t=yield this.actionSheetController.create({header:this.util.translate("Choose from"),buttons:[{text:this.util.translate("Camera"),icon:"camera",handler:()=>{console.log("Delete clicked"),this.opemCamera("camera",e)}},{text:this.util.translate("Gallery"),icon:"image",handler:()=>{console.log("Share clicked"),this.opemCamera("gallery",e)}},{text:this.util.translate("Cancel"),icon:"close",role:"cancel",handler:()=>{console.log("Cancel clicked")}}]});yield t.present()})}opemCamera(e,t){const i={quality:100,targetHeight:700,targetWidth:700,destinationType:this.camera.DestinationType.DATA_URL,encodingType:this.camera.EncodingType.JPEG,mediaType:this.camera.MediaType.PICTURE,sourceType:"camera"===e?1:0};console.log("open"),this.camera.getPicture(i).then(e=>{this.util.show();const i={img:e,type:"jpg"};console.log("parma==>",i),this.api.nativePost("users/upload_file",i).then(e=>{this.util.hide(),console.log("data",JSON.parse(e.data));const i=JSON.parse(e.data);console.log("numm-0--\x3e>",t),t?(console.log("num"),1!==t&&"1"!==t||(this.image1=i.data),2!==t&&"2"!==t||(this.image2=i.data),3!==t&&"3"!==t||(this.image3=i.data),4!==t&&"4"!==t||(this.image4=i.data),5!==t&&"5"!==t||(this.image5=i.data),6!==t&&"6"!==t||(this.image6=i.data)):(console.log("cover!!!"),this.coverImage=i.data)},e=>{console.log(e),this.util.hide(),this.util.errorToast(this.util.translate("Something went wrong"))}).catch(e=>{console.log(e),this.util.hide(),this.util.errorToast(this.util.translate("Something went wrong"))})},e=>{this.util.hide(),console.log(e),this.util.errorToast(this.util.translate("Something went wrong"))})}makeid(e){let t="";const i="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=i.length;for(let o=0;o<e;o++)t+=i.charAt(Math.floor(Math.random()*n));return t}}return e.\u0275fac=function(t){return new(t||e)(g.Lb(s.a),g.Lb(l.a),g.Lb(h.a),g.Lb(c.a),g.Lb(s.cb),g.Lb(a.g))},e.\u0275cmp=g.Fb({type:e,selectors:[["app-venue-profile"]],viewQuery:function(e,t){if(1&e&&g.wc(u,3,s.F),2&e){let e;g.kc(e=g.Xb())&&(t.searchbar=e.first)}},decls:30,vars:17,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],[1,"ion-padding"],[1,"mainContent"],[1,"lbl"],["type","text","placeholder","Enter your restaurant name",1,"inputText",3,"ngModel","ngModelChange"],["type","number",1,"inputText",3,"ngModel","placeholder","ngModelChange"],["type","number","placeholder","Phone Number",1,"inputText",3,"ngModel","ngModelChange"],["type","number","placeholder","",1,"inputText",3,"ngModel","ngModelChange"],["rows","5","placeholder","",1,"inputText",3,"ngModel","ngModelChange"],["class","coverPlaceholder",3,"click",4,"ngIf"],["class","coverReal",3,"ngStyle","click",4,"ngIf"],["expand","block",3,"click"],[1,"coverPlaceholder",3,"click"],["name","cloud-upload-outline","color","primary"],[1,"coverReal",3,"ngStyle","click"]],template:function(e,t){1&e&&(g.Ob(0,"ion-header"),g.Ob(1,"ion-toolbar",0),g.Ob(2,"ion-buttons",1),g.Ob(3,"ion-button",2),g.Wb("click",function(){return t.util.back()}),g.Mb(4,"ion-icon",3),g.Nb(),g.Nb(),g.Ob(5,"ion-title"),g.rc(6),g.Nb(),g.Nb(),g.Nb(),g.Ob(7,"ion-content",4),g.Ob(8,"div",5),g.Ob(9,"p",6),g.rc(10),g.Nb(),g.Ob(11,"ion-input",7),g.Wb("ngModelChange",function(e){return t.name=e}),g.Nb(),g.Ob(12,"p",6),g.rc(13),g.Nb(),g.Ob(14,"ion-input",8),g.Wb("ngModelChange",function(e){return t.dishPrice=e}),g.Nb(),g.Ob(15,"p",6),g.rc(16),g.Nb(),g.Ob(17,"ion-input",9),g.Wb("ngModelChange",function(e){return t.phone=e}),g.Nb(),g.Ob(18,"p",6),g.rc(19),g.Nb(),g.Ob(20,"ion-input",10),g.Wb("ngModelChange",function(e){return t.time=e}),g.Nb(),g.Ob(21,"p",6),g.rc(22),g.Nb(),g.Ob(23,"ion-textarea",11),g.Wb("ngModelChange",function(e){return t.descritions=e}),g.Nb(),g.Ob(24,"p",6),g.rc(25),g.Nb(),g.qc(26,m,6,2,"div",12),g.qc(27,p,1,3,"div",13),g.Ob(28,"ion-button",14),g.Wb("click",function(){return t.submit()}),g.rc(29),g.Nb(),g.Nb(),g.Nb()),2&e&&(g.Ab(6),g.sc(t.util.translate("Perfil del comercio")),g.Ab(4),g.sc(t.util.translate("Nombre del comercio")),g.Ab(1),g.ec("ngModel",t.name),g.Ab(2),g.uc("",t.util.translate("Precio minimo")," ",t.util.currecny,""),g.Ab(1),g.ec("ngModel",t.dishPrice)("placeholder",t.util.currecny),g.Ab(2),g.sc(t.util.translate("Telefono")),g.Ab(1),g.ec("ngModel",t.phone),g.Ab(2),g.sc(t.util.translate("Tiempo estimado de entrega")),g.Ab(1),g.ec("ngModel",t.time),g.Ab(2),g.sc(t.util.translate("Descripcion del comercio")),g.Ab(1),g.ec("ngModel",t.descritions),g.Ab(2),g.sc(t.util.translate("Portada")),g.Ab(1),g.ec("ngIf",!t.coverImage||""==t.coverImage),g.Ab(1),g.ec("ngIf",t.coverImage&&""!=t.coverImage),g.Ab(2),g.tc(" ",t.util.translate("Actualizar")," "))},directives:[s.o,s.W,s.g,s.f,s.p,s.V,s.j,s.q,s.jb,o.i,o.l,s.eb,s.T,n.i,n.j],styles:["ion-item[_ngcontent-%COMP%]{border:1px solid #d3d3d3;border-radius:5px}.mainContent[_ngcontent-%COMP%]   .lbl[_ngcontent-%COMP%]{color:var(--ion-color-dark);margin:10px 0!important;font-weight:700}.mainContent[_ngcontent-%COMP%]   .inputText[_ngcontent-%COMP%]{border:.5px solid #d3d3d3;border-radius:5px;padding:0 10px!important}.mainContent[_ngcontent-%COMP%]   .coverPlaceholder[_ngcontent-%COMP%]{text-align:center;padding:60px;border:1px solid #d3d3d3;border-radius:10px}.mainContent[_ngcontent-%COMP%]   .galleryPlaceholder[_ngcontent-%COMP%]{text-align:center;padding:10px;border:1px solid #d3d3d3;border-radius:10px}.mainContent[_ngcontent-%COMP%]   .coverReal[_ngcontent-%COMP%]{height:150px}.mainContent[_ngcontent-%COMP%]   .coverReal[_ngcontent-%COMP%], .mainContent[_ngcontent-%COMP%]   .galleryReal[_ngcontent-%COMP%]{width:100%;border-radius:5px;background-position:50%;background-repeat:no-repeat;background-size:cover}.mainContent[_ngcontent-%COMP%]   .galleryReal[_ngcontent-%COMP%]{height:90px}.mainContent[_ngcontent-%COMP%]   ion-button[_ngcontent-%COMP%]{--border-radius:5px;font-weight:600;margin-bottom:10px;margin-top:20px}"]}),e})()}];let f=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.Jb({type:e}),e.\u0275inj=g.Ib({imports:[[a.i.forChild(C)],a.i]}),e})();var v=i("PCNd");let O=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=g.Jb({type:e}),e.\u0275inj=g.Ib({imports:[[n.b,o.e,s.X,v.a,f]]}),e})()}}]);