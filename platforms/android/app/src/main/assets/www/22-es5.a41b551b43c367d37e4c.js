!function(){function t(t){return function(t){if(Array.isArray(t))return n(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||function(t,e){if(!t)return;if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);"Object"===i&&t.constructor&&(i=t.constructor.name);if("Map"===i||"Set"===i)return Array.from(t);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return n(t,e)}(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,n){(null==n||n>t.length)&&(n=t.length);for(var e=0,i=new Array(n);e<n;e++)i[e]=t[e];return i}function e(t,n){if(!(t instanceof n))throw new TypeError("Cannot call a class as a function")}function i(t,n){for(var e=0;e<n.length;e++){var i=n[e];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{UTXh:function(n,o,r){"use strict";r.r(o),r.d(o,"ChatsPageModule",function(){return O});var a=r("ofXK"),c=r("3Pt+"),s=r("TEn/"),u=r("tyNb"),b=r("2Rin"),l=r("8RPc"),f=r("fXoL");function m(t,n){1&t&&(f.Ob(0,"ion-item"),f.Ob(1,"ion-avatar",1),f.Mb(2,"ion-skeleton-text"),f.Nb(),f.Ob(3,"ion-label"),f.Ob(4,"h3"),f.Mb(5,"ion-skeleton-text",9),f.Nb(),f.Ob(6,"p"),f.Mb(7,"ion-skeleton-text",10),f.Nb(),f.Nb(),f.Nb())}function p(t,n){if(1&t){var e=f.Pb();f.Ob(0,"ion-item",11),f.Wb("click",function(){f.mc(e);var t=n.$implicit;return f.Yb().onChat(t)}),f.Ob(1,"ion-avatar",1),f.Mb(2,"img",12),f.Nb(),f.Ob(3,"ion-label"),f.Ob(4,"h3"),f.rc(5),f.Nb(),f.Ob(6,"p"),f.rc(7),f.Nb(),f.Nb(),f.Mb(8,"ion-ripple-effect"),f.Nb()}if(2&t){var i=n.$implicit,o=f.Yb();f.Ab(2),f.ec("src",o.api.mediaURL+i.cover,f.oc),f.Ab(3),f.uc(" ",i.first_name," ",i.last_name," "),f.Ab(2),f.tc(" ",i.email," ")}}var h,d,y,g=[{path:"",component:(h=function(){function n(t,i,o,r){e(this,n),this.api=t,this.util=i,this.router=o,this.navCtrl=r,this.dummy=[],this.users=[],this.getChats()}var o,r,a;return o=n,(r=[{key:"getChats",value:function(){var n=this,e={id:localStorage.getItem("uid")};this.dummy=Array(10),this.api.post("chats/getByGroup",e).then(function(e){if(console.log(e),e&&200===e.status){var i=[];e.data.forEach(function(t){i.push(t.from_id),i.push(t.room_id)});var o=t(new Set(i));o=o.filter(function(t){return t!==localStorage.getItem("uid")}),console.log("uniq->>",o);var r={id:o.join()};n.api.post("users/getChatsNames",r).then(function(t){n.dummy=[],t&&200===t.status&&(n.users=t.data)},function(t){console.log(t),n.users=[],n.dummy=[],n.util.errorToast(n.util.translate("Something went wrong"))})}else n.dummy=[]},function(t){console.log(t),n.util.errorToast(n.util.translate("Something went wrong"))})}},{key:"ngOnInit",value:function(){}},{key:"back",value:function(){this.navCtrl.back()}},{key:"onAdmin",value:function(){this.router.navigate(["inbox"],{queryParams:{id:0,name:"Support"}})}},{key:"onChat",value:function(t){this.router.navigate(["inbox"],{queryParams:{id:t.id,name:t.first_name+" "+t.last_name}})}}])&&i(o.prototype,r),a&&i(o,a),n}(),h.\u0275fac=function(t){return new(t||h)(f.Lb(l.a),f.Lb(b.a),f.Lb(u.g),f.Lb(s.cb))},h.\u0275cmp=f.Fb({type:h,selectors:[["app-chats"]],decls:14,vars:4,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],["slot","end"],["slot","start","name","happy"],[1,"ion-padding"],[4,"ngFor","ngForOf"],["class","ion-activatable ripple-parent",3,"click",4,"ngFor","ngForOf"],["animated","",2,"width","80%"],["animated","",2,"width","60%"],[1,"ion-activatable","ripple-parent",3,"click"],["onError","this.src='assets/imgs/user.png'",3,"src"]],template:function(t,n){1&t&&(f.Ob(0,"ion-header"),f.Ob(1,"ion-toolbar",0),f.Ob(2,"ion-buttons",1),f.Ob(3,"ion-button",2),f.Wb("click",function(){return n.back()}),f.Mb(4,"ion-icon",3),f.Nb(),f.Nb(),f.Ob(5,"ion-title"),f.rc(6),f.Nb(),f.Ob(7,"ion-buttons",4),f.Ob(8,"ion-button",2),f.Wb("click",function(){return n.onAdmin()}),f.Mb(9,"ion-icon",5),f.rc(10),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Ob(11,"ion-content",6),f.qc(12,m,8,0,"ion-item",7),f.qc(13,p,9,4,"ion-item",8),f.Nb()),2&t&&(f.Ab(6),f.sc(n.util.translate("Chats")),f.Ab(4),f.tc(" ",n.util.translate("Support")," "),f.Ab(2),f.ec("ngForOf",n.dummy),f.Ab(1),f.ec("ngForOf",n.users))},directives:[s.o,s.W,s.g,s.f,s.p,s.V,s.j,a.h,s.r,s.e,s.K,s.t,s.C],styles:[""]}),h)}],v=((y=function t(){e(this,t)}).\u0275fac=function(t){return new(t||y)},y.\u0275mod=f.Jb({type:y}),y.\u0275inj=f.Ib({imports:[[u.i.forChild(g)],u.i]}),y),O=((d=function t(){e(this,t)}).\u0275fac=function(t){return new(t||d)},d.\u0275mod=f.Jb({type:d}),d.\u0275inj=f.Ib({imports:[[a.b,c.e,s.X,v]]}),d)}}])}();