!function(){function o(o,t){if(!(o instanceof t))throw new TypeError("Cannot call a class as a function")}function t(o,t){for(var n=0;n<t.length;n++){var e=t[n];e.enumerable=e.enumerable||!1,e.configurable=!0,"value"in e&&(e.writable=!0),Object.defineProperty(o,e.key,e)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[26],{F4UR:function(n,e,i){"use strict";i.r(e),i.d(e,"LoginPageModule",function(){return T});var a=i("ofXK"),r=i("3Pt+"),l=i("TEn/"),s=i("tyNb"),c=i("mrSG"),u=i("8RPc"),g=i("2Rin"),b=i("PSD3"),d=i.n(b),m=i("wljF"),p=i("hxji"),f=i("TCp9"),h=i("fXoL");function w(o,t){if(1&o&&(h.Ob(0,"span"),h.rc(1),h.Nb()),2&o){var n=h.Yb(2);h.Ab(1),h.tc(" ",n.util.translate("Iniciar"),"")}}function O(o,t){1&o&&h.Mb(0,"ion-spinner",19)}function v(o,t){if(1&o){var n=h.Pb();h.Ob(0,"form",5,6),h.Ob(2,"ion-list",7),h.Ob(3,"ion-item",7),h.Ob(4,"ion-input",8,9),h.Wb("ngModelChange",function(o){return h.mc(n),h.Yb().login.email=o}),h.Nb(),h.Nb(),h.Ob(6,"ion-text",10),h.Ob(7,"p",11),h.rc(8),h.Nb(),h.Nb(),h.Ob(9,"ion-item",7),h.Ob(10,"ion-input",12,13),h.Wb("ngModelChange",function(o){return h.mc(n),h.Yb().login.password=o}),h.Nb(),h.Nb(),h.Ob(12,"ion-text",10),h.Ob(13,"p",11),h.rc(14),h.Nb(),h.Nb(),h.Nb(),h.Ob(15,"ion-row",14),h.Ob(16,"ion-col",14),h.Ob(17,"p",15),h.Wb("click",function(){return h.mc(n),h.Yb().resetPass()}),h.rc(18),h.Nb(),h.Ob(19,"ion-button",16),h.Wb("click",function(){h.mc(n);var o=h.lc(1);return h.Yb().onLogin(o)}),h.qc(20,w,2,1,"span",17),h.qc(21,O,1,0,"ion-spinner",18),h.Nb(),h.Nb(),h.Nb(),h.Nb()}if(2&o){var e=h.lc(5),i=h.lc(11),a=h.Yb();h.Ab(4),h.ec("ngModel",a.login.email)("placeholder",a.util.translate("Correo")),h.Ab(3),h.ec("hidden",e.valid||0==a.submitted),h.Ab(1),h.tc(" ",a.util.translate("El correo es requerido")," "),h.Ab(2),h.ec("ngModel",a.login.password)("placeholder",a.util.translate("Contrase\xf1a")),h.Ab(3),h.ec("hidden",i.valid||0==a.submitted),h.Ab(1),h.tc(" ",a.util.translate("La contrase\xf1a es requerida")," "),h.Ab(4),h.sc(a.util.translate("Olvidaste tu contrase\xf1a?")),h.Ab(1),h.ec("disabled",a.isLogin),h.Ab(1),h.ec("ngIf",!a.isLogin),h.Ab(1),h.ec("ngIf",a.isLogin)}}function C(o,t){if(1&o&&(h.Ob(0,"span"),h.rc(1),h.Nb()),2&o){var n=h.Yb(2);h.Ab(1),h.tc(" ",n.util.translate("Log In"),"")}}function N(o,t){1&o&&h.Mb(0,"ion-spinner",19)}function M(o,t){if(1&o){var n=h.Pb();h.Ob(0,"form",5,6),h.Ob(2,"ion-list",7),h.Ob(3,"ion-row"),h.Ob(4,"ion-col",20),h.Wb("click",function(){return h.mc(n),h.Yb().openCountry()}),h.Ob(5,"ion-item",7),h.Ob(6,"ion-input",21,22),h.Wb("ngModelChange",function(o){return h.mc(n),h.Yb().mobile.ccCode=o}),h.Nb(),h.Nb(),h.Nb(),h.Ob(8,"ion-col",23),h.Ob(9,"ion-item",7),h.Ob(10,"ion-input",24,25),h.Wb("ngModelChange",function(o){return h.mc(n),h.Yb().mobile.phone=o}),h.Nb(),h.Nb(),h.Ob(12,"ion-text",10),h.Ob(13,"p",11),h.rc(14),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Ob(15,"ion-item",7),h.Ob(16,"ion-input",12,13),h.Wb("ngModelChange",function(o){return h.mc(n),h.Yb().mobile.password=o}),h.Nb(),h.Nb(),h.Ob(18,"ion-text",10),h.Ob(19,"p",11),h.rc(20),h.Nb(),h.Nb(),h.Nb(),h.Ob(21,"ion-row",14),h.Ob(22,"ion-col",14),h.Ob(23,"p",15),h.Wb("click",function(){return h.mc(n),h.Yb().resetPass()}),h.rc(24),h.Nb(),h.Ob(25,"ion-button",16),h.Wb("click",function(){h.mc(n);var o=h.lc(1);return h.Yb().onPhoneLogin(o)}),h.qc(26,C,2,1,"span",17),h.qc(27,N,1,0,"ion-spinner",18),h.Nb(),h.Nb(),h.Nb(),h.Nb()}if(2&o){var e=h.lc(11),i=h.lc(17),a=h.Yb();h.Ab(6),h.ec("ngModel",a.mobile.ccCode),h.Ab(4),h.ec("ngModel",a.mobile.phone)("placeholder",a.util.translate("Mobile Number")),h.Ab(3),h.ec("hidden",e.valid||0==a.submitted),h.Ab(1),h.tc(" ",a.util.translate("Phone number is required")," "),h.Ab(2),h.ec("ngModel",a.mobile.password)("placeholder",a.util.translate("Password")),h.Ab(3),h.ec("hidden",i.valid||0==a.submitted),h.Ab(1),h.tc(" ",a.util.translate("Password is required")," "),h.Ab(4),h.sc(a.util.translate("Forgot Password?")),h.Ab(1),h.ec("disabled",a.isLogin),h.Ab(1),h.ec("ngIf",!a.isLogin),h.Ab(1),h.ec("ngIf",a.isLogin)}}function L(o,t){if(1&o&&(h.Ob(0,"span"),h.rc(1),h.Nb()),2&o){var n=h.Yb(2);h.Ab(1),h.tc(" ",n.util.translate("Log In"),"")}}function P(o,t){1&o&&h.Mb(0,"ion-spinner",19)}function k(o,t){if(1&o){var n=h.Pb();h.Ob(0,"form",5,6),h.Ob(2,"ion-list",7),h.Ob(3,"ion-row"),h.Ob(4,"ion-col",20),h.Wb("click",function(){return h.mc(n),h.Yb().openCountry()}),h.Ob(5,"ion-item",7),h.Ob(6,"ion-input",21,22),h.Wb("ngModelChange",function(o){return h.mc(n),h.Yb().mobileLogin.ccCode=o}),h.Nb(),h.Nb(),h.Nb(),h.Ob(8,"ion-col",23),h.Ob(9,"ion-item",7),h.Ob(10,"ion-input",24,25),h.Wb("ngModelChange",function(o){return h.mc(n),h.Yb().mobileLogin.phone=o}),h.Nb(),h.Nb(),h.Ob(12,"ion-text",10),h.Ob(13,"p",11),h.rc(14),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Ob(15,"ion-row",14),h.Ob(16,"ion-col",14),h.Ob(17,"p",15),h.Wb("click",function(){return h.mc(n),h.Yb().resetPass()}),h.rc(18),h.Nb(),h.Ob(19,"ion-button",16),h.Wb("click",function(){h.mc(n);var o=h.lc(1);return h.Yb().onOTPLogin(o)}),h.qc(20,L,2,1,"span",17),h.qc(21,P,1,0,"ion-spinner",18),h.Nb(),h.Nb(),h.Nb(),h.Nb()}if(2&o){var e=h.lc(11),i=h.Yb();h.Ab(6),h.ec("ngModel",i.mobileLogin.ccCode),h.Ab(4),h.ec("ngModel",i.mobileLogin.phone)("placeholder",i.util.translate("Mobile Number")),h.Ab(3),h.ec("hidden",e.valid||0==i.submitted),h.Ab(1),h.tc(" ",i.util.translate("Phone number is required")," "),h.Ab(4),h.sc(i.util.translate("Forgot Password?")),h.Ab(1),h.ec("disabled",i.isLogin),h.Ab(1),h.ec("ngIf",!i.isLogin),h.Ab(1),h.ec("ngIf",i.isLogin)}}var x,y,_,A=[{path:"",component:(x=function(){function n(t,e,i,a,r,l,s,c){o(this,n),this.router=t,this.api=e,this.util=i,this.navCtrl=a,this.oneSignal=r,this.menuController=l,this.modalController=s,this.modalCtrl=c,this.login={email:"",password:""},this.mobile={ccCode:"",phone:"",password:""},this.mobileLogin={ccCode:"",phone:""},this.submitted=!1,this.isLogin=!1,console.log("--------------- user login",this.util.user_login),this.mobile.ccCode="+91",this.mobileLogin.ccCode="+91",this.oneSignal.getIds().then(function(o){console.log("iddddd==========",o),localStorage.setItem("fcm",o.userId)})}var e,i,a;return e=n,(i=[{key:"ngOnInit",value:function(){}},{key:"onLogin",value:function(o){var t=this;if(console.log("form",o),this.submitted=!0,o.valid){if(!/^[\w._-]+[+]?[\w._-]+@[\w.-]+\.[a-zA-Z]{2,6}$/.test(this.login.email))return this.util.showToast(this.util.translate("Please enter valid email"),"danger","bottom"),!1;console.log("login"),this.isLogin=!0,this.api.post("users/login",this.login).then(function(o){if(t.isLogin=!1,console.log(o),o&&200===o.status)if(o&&o.data&&"store"===o.data.type)if("1"===o.data.status){localStorage.setItem("uid",o.data.id);var n=localStorage.getItem("fcm");n&&null!==n&&"null"!==n&&t.api.post("users/edit_profile",{id:o.data.id,fcm_token:n}).then(function(o){console.log("user info=>",o)},function(o){console.log(o)}),t.api.post("stores/getByUid",{id:o.data.id}).then(function(o){t.isLogin=!1,console.log("*******************",o),o&&200===o.status&&o.data&&o.data.length&&(t.util.store=o.data[0],localStorage.setItem("suid",o.data[0].id),t.navCtrl.navigateRoot([""]))},function(o){t.isLogin=!1,t.util.errorToast(t.util.translate("Something went wrong")),console.log(o)})}else console.log("not valid"),d.a.fire({title:t.util.translate("Error"),text:t.util.translate("Your are blocked please contact administrator"),icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:t.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(function(n){n&&n.value&&t.router.navigate(["inbox"],{queryParams:{id:0,name:"Support",uid:o.data.id}})});else t.util.errorToast(t.util.translate("Not valid user")),t.login.email="",t.login.password="";else t.util.errorToast(o&&500===o.status?o.data.message:t.util.translate("Something went wrong"))},function(o){console.log(o),t.isLogin=!1,t.util.errorToast(t.util.translate("Something went wrong"))})}}},{key:"onPhoneLogin",value:function(o){var t=this;if(console.log("form",o,this.mobile),console.log(this.mobile.ccCode+this.mobile.phone),this.submitted=!0,o.valid){var n={cc:this.mobile.ccCode,mobile:this.mobile.phone,password:this.mobile.password};this.isLogin=!0,this.api.post("users/loginWithPhoneAndPassword",n).then(function(o){if(t.isLogin=!1,console.log(o),o&&200===o.status)if(o&&o.data&&"store"===o.data.type)if("1"===o.data.status){localStorage.setItem("uid",o.data.id);var n=localStorage.getItem("fcm");n&&null!==n&&"null"!==n&&t.api.post("users/edit_profile",{id:o.data.id,fcm_token:n}).then(function(o){console.log("user info=>",o)},function(o){console.log(o)}),t.api.post("stores/getByUid",{id:o.data.id}).then(function(o){t.isLogin=!1,console.log("*******************",o),o&&200===o.status&&o.data&&o.data.length&&(t.util.store=o.data[0],localStorage.setItem("suid",o.data[0].id),t.navCtrl.navigateRoot([""]))},function(o){t.isLogin=!1,t.util.errorToast(t.util.translate("Something went wrong")),console.log(o)})}else console.log("not valid"),d.a.fire({title:t.util.translate("Error"),text:t.util.translate("Your are blocked please contact administrator"),icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:t.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(function(n){n&&n.value&&t.router.navigate(["inbox"],{queryParams:{id:0,name:"Support",uid:o.data.id}})});else t.util.errorToast(t.util.translate("Not valid user")),t.login.email="",t.login.password="";else t.util.errorToast(o&&500===o.status?o.data.message:t.util.translate("Something went wrong"))},function(o){console.log(o),t.isLogin=!1,t.util.errorToast(t.util.translate("Something went wrong"))}).catch(function(o){console.log(o),t.isLogin=!1,t.util.errorToast(t.util.translate("Something went wrong"))})}}},{key:"onOTPLogin",value:function(o){var t=this;if(console.log(this.mobileLogin),this.submitted=!0,o.valid){var n={mobile:this.mobileLogin.phone,cc:this.mobileLogin.ccCode};this.isLogin=!0,this.api.post("users/checkMobileNumber",n).then(function(o){t.isLogin=!1,console.log(o),o&&200===o.status?(console.log("open modal"),t.openModal(o.data.id)):t.util.errorToast(o&&500===o.status?o.data.message:t.util.translate("Something went wrong"))},function(o){console.log(o),t.isLogin=!1,t.util.errorToast(t.util.translate("Something went wrong"))}).catch(function(o){console.log(o),t.isLogin=!1,t.util.errorToast(t.util.translate("Something went wrong"))})}}},{key:"openModal",value:function(o){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,e=this;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("uid",o),t.next=3,this.modalCtrl.create({component:f.a,componentProps:{code:this.mobileLogin.ccCode,phone:this.mobileLogin.phone}});case 3:(n=t.sent).onDidDismiss().then(function(t){console.log(t),t&&"ok"===t.role&&e.api.post("users/getById",{id:o}).then(function(t){if(console.log("user data",t),t&&200===t.status&&t.data&&t.data.length&&"store"===t.data[0].type)if(t&&t.data&&"store"===t.data[0].type)if("1"===t.data[0].status){localStorage.setItem("uid",o);var n=localStorage.getItem("fcm");n&&null!==n&&"null"!==n&&e.api.post("users/edit_profile",{id:o,fcm_token:n}).then(function(o){console.log("user info=>",o)},function(o){console.log(o)}),e.api.post("stores/getByUid",{id:o}).then(function(o){e.isLogin=!1,console.log("*******************",o),o&&200===o.status&&o.data&&o.data.length&&(e.util.store=o.data[0],localStorage.setItem("suid",o.data[0].id),e.navCtrl.navigateRoot([""]))},function(o){e.isLogin=!1,e.util.errorToast(e.util.translate("Something went wrong")),console.log(o)})}else console.log("not valid"),d.a.fire({title:e.util.translate("Error"),text:e.util.translate("Your are blocked please contact administrator"),icon:"error",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:e.util.translate("Need Help?"),backdrop:!1,background:"white"}).then(function(t){t&&t.value&&e.router.navigate(["inbox"],{queryParams:{id:0,name:"Support",uid:o}})});else e.util.errorToast(e.util.translate("Not valid user")),e.login.email="",e.login.password="";else e.util.errorToast(t&&500===t.status?t.data.message:e.util.translate("Something went wrong"))},function(o){localStorage.removeItem("uid"),console.log(o)})}),n.present();case 5:case"end":return t.stop()}},t,this)}))}},{key:"resetPass",value:function(){this.router.navigate(["/reset"])}},{key:"register",value:function(){this.router.navigate(["register"])}},{key:"ionViewWillEnter",value:function(){this.menuController.enable(!1)}},{key:"ionViewWillLeave",value:function(){this.menuController.enable(!0)}},{key:"openCountry",value:function(){return Object(c.a)(this,void 0,void 0,regeneratorRuntime.mark(function o(){var t,n=this;return regeneratorRuntime.wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return console.log("open ccode"),o.next=3,this.modalController.create({component:p.a,backdropDismiss:!1,showBackdrop:!0});case 3:return(t=o.sent).onDidDismiss().then(function(o){console.log(o),o&&"selected"===o.role&&(console.log("ok"),n.mobile.ccCode="+"+o.data,n.mobileLogin.ccCode="+"+o.data)}),o.next=7,t.present();case 7:case"end":return o.stop()}},o,this)}))}}])&&t(e.prototype,i),a&&t(e,a),n}(),x.\u0275fac=function(o){return new(o||x)(h.Lb(s.g),h.Lb(u.a),h.Lb(g.a),h.Lb(l.cb),h.Lb(m.a),h.Lb(l.ab),h.Lb(l.bb),h.Lb(l.bb))},x.\u0275cmp=h.Fb({type:x,selectors:[["app-login"]],decls:8,vars:4,consts:[[1,"ion-padding"],[1,"login-logo"],["src","assets/icon.png","alt","foodies",1,"logo_icon"],[1,"login-name"],["novalidate","",4,"ngIf"],["novalidate",""],["loginForm","ngForm"],["lines","none"],["type","email","name","email","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["email","ngModel"],["color","danger"],[1,"ion-padding-start",3,"hidden"],["name","password","type","password","required","",3,"ngModel","placeholder","ngModelChange"],["password","ngModel"],[1,"ion-no-margin","ion-no-padding"],[1,"frgTag",3,"click"],["type","submit","expand","block",1,"btn_class",3,"disabled","click"],[4,"ngIf"],["name","circles",4,"ngIf"],["name","circles"],["size","3",3,"click"],["disabled","true","type","text","name","ccode","spellcheck","false","autocapitalize","off","required","",2,"font-size","12px",3,"ngModel","ngModelChange"],["ccode","ngModel"],["size","9"],["type","number","name","mobile","spellcheck","false","autocapitalize","off","required","",3,"ngModel","placeholder","ngModelChange"],["phone","ngModel"]],template:function(o,t){1&o&&(h.Ob(0,"ion-content",0),h.Ob(1,"div",1),h.Mb(2,"img",2),h.Ob(3,"p",3),h.rc(4),h.Nb(),h.Nb(),h.qc(5,v,22,12,"form",4),h.qc(6,M,28,13,"form",4),h.qc(7,k,22,9,"form",4),h.Nb()),2&o&&(h.Ab(4),h.sc(t.util.translate("Iniciar sesi\xf3n")),h.Ab(1),h.ec("ngIf","0"===t.util.user_login),h.Ab(1),h.ec("ngIf","1"===t.util.user_login),h.Ab(1),h.ec("ngIf","2"===t.util.user_login))},directives:[l.j,a.i,r.p,r.j,r.k,l.u,l.r,l.q,l.jb,r.o,r.i,r.l,l.S,l.E,l.i,l.f,l.N,l.eb],styles:["ion-footer[_ngcontent-%COMP%], ion-header[_ngcontent-%COMP%]{--box-shadow:none}ion-toolbar[_ngcontent-%COMP%]{border-color:none!important}ion-toolbar[_ngcontent-%COMP%]   ion-title[_ngcontent-%COMP%]{--color:#fff}.login-logo[_ngcontent-%COMP%]{text-align:center;right:0;left:0;margin:20% auto 20px}.login-logo[_ngcontent-%COMP%]   .logo_icon[_ngcontent-%COMP%]{width:110px!important}.login-logo[_ngcontent-%COMP%]   .login-name[_ngcontent-%COMP%]{margin:0;font-size:1.5rem}.login-logo[_ngcontent-%COMP%]   .subTitle[_ngcontent-%COMP%]{margin:0;font-size:1rem}.frgTag[_ngcontent-%COMP%]{text-align:right;color:var(--ion-color-primary)}.btn_class[_ngcontent-%COMP%]{color:#fff;height:50px;--border-radius:5px}.login-logo[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{max-width:150px}.list[_ngcontent-%COMP%]{margin-bottom:0}ion-list[_ngcontent-%COMP%]{--ion-background-color:transparent;margin:0}ion-item[_ngcontent-%COMP%]{--ion-background-color:#f3f3f3;border-radius:5px!important;margin-top:10px}.createAcc[_ngcontent-%COMP%]{text-align:center}.createAcc[_ngcontent-%COMP%]   .registerTag[_ngcontent-%COMP%]{color:var(--ion-color-primary);font-weight:700}.btns[_ngcontent-%COMP%]{display:flex;flex-direction:row;justify-content:center;align-items:center;padding:10px 0}.btns[_ngcontent-%COMP%]   .flagActive[_ngcontent-%COMP%]{height:50px;width:50px;border-radius:50%;border:2px solid var(--ion-color-primary);margin:0 10px}.btns[_ngcontent-%COMP%]   .flagDeactive[_ngcontent-%COMP%]{height:45px;width:45px;margin:0 10px;opacity:.5}"]}),x)}],I=((y=function t(){o(this,t)}).\u0275fac=function(o){return new(o||y)},y.\u0275mod=h.Jb({type:y}),y.\u0275inj=h.Ib({imports:[[s.i.forChild(A)],s.i]}),y),S=i("PCNd"),T=((_=function t(){o(this,t)}).\u0275fac=function(o){return new(o||_)},_.\u0275mod=h.Jb({type:_}),_.\u0275inj=h.Ib({imports:[[a.b,r.e,l.X,S.a,I]]}),_)}}])}();