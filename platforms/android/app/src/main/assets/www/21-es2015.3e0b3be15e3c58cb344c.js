(window.webpackJsonp=window.webpackJsonp||[]).push([[21],{iCz4:function(t,e,i){"use strict";i.r(e),i.d(e,"CategoryPageModule",function(){return O});var n=i("ofXK"),s=i("3Pt+"),o=i("TEn/"),r=i("tyNb"),a=i("mrSG"),l=i("8RPc"),c=i("2Rin"),u=i("PSD3"),h=i.n(u),m=i("fXoL");function d(t,e){if(1&t&&(m.Ob(0,"h2",11),m.rc(1),m.Nb()),2&t){const t=m.Yb();m.Ab(1),m.tc("",t.util.translate("No existen categorias")," ")}}function g(t,e){1&t&&(m.Ob(0,"ion-item"),m.Ob(1,"ion-thumbnail",1),m.Mb(2,"ion-skeleton-text",12),m.Nb(),m.Ob(3,"ion-label"),m.Ob(4,"h3"),m.Mb(5,"ion-skeleton-text",13),m.Nb(),m.Ob(6,"p"),m.Mb(7,"ion-skeleton-text",14),m.Nb(),m.Ob(8,"p"),m.Mb(9,"ion-skeleton-text",15),m.Nb(),m.Nb(),m.Nb())}function b(t,e){if(1&t){const t=m.Pb();m.Ob(0,"ion-item",16),m.Ob(1,"ion-label"),m.rc(2),m.Nb(),m.Ob(3,"ion-icon",17),m.Wb("click",function(){m.mc(t);const i=e.$implicit;return m.Yb().edit(i)}),m.Nb(),m.Ob(4,"ion-icon",18),m.Wb("click",function(){m.mc(t);const i=e.$implicit;return m.Yb().deleteItem(i)}),m.Nb(),m.Ob(5,"ion-icon",19),m.Wb("click",function(){m.mc(t);const i=e.$implicit;return m.Yb().hideStatus(i)}),m.Nb(),m.Nb()}if(2&t){const t=e.$implicit;m.Ab(2),m.sc(t.name),m.Ab(3),m.ec("name","1"===t.status?"eye-outline":"eye-off-outline")}}const p=[{path:"",component:(()=>{class t{constructor(t,e,i,n){this.api=t,this.alertController=e,this.util=i,this.router=n,this.categories=[],this.dummy=Array(50),this.getCategories()}getCategories(){const t={id:localStorage.getItem("uid")};this.api.post("categories/getByRestId",t).then(t=>{this.dummy=[],t&&200===t.status&&t.data.length&&(this.categories=t.data)},t=>{this.dummy=[],this.util.errorToast(this.util.translate("Something went wrong"))}).catch(t=>{console.log(t),console.log(t),this.dummy=[],this.util.errorToast(this.util.translate("Something went wrong"))})}ngOnInit(){}addNewCat(){return Object(a.a)(this,void 0,void 0,function*(){const t=yield this.alertController.create({header:this.util.translate("A\xf1adir nueva!"),mode:"ios",inputs:[{name:"name1",type:"text",placeholder:this.util.translate("Nombre de categoria")}],buttons:[{text:this.util.translate("Cancelar"),role:"cancel",cssClass:"secondary",handler:()=>{}},{text:this.util.translate("Ok"),handler:t=>{if(t&&""!==t.name1){const e={restId:localStorage.getItem("uid"),name:t.name1,status:1};this.util.show(),this.api.post("categories/save",e).then(t=>{this.util.hide(),t&&200===t.status?(this.getCategories(),h.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,onOpen:t=>{t.addEventListener("mouseenter",h.a.stopTimer),t.addEventListener("mouseleave",h.a.resumeTimer)}}).fire({icon:"success",title:this.util.translate("saved")})):this.util.errorToast(this.util.translate("Something went wrong"))},t=>{this.util.hide(),this.util.errorToast(this.util.translate("Something went wrong"))}).catch(t=>{this.util.hide(),this.util.errorToast(this.util.translate("Something went wrong"))})}}}]});yield t.present()})}edit(t){return Object(a.a)(this,void 0,void 0,function*(){const e=yield this.alertController.create({header:this.util.translate("Editar"),mode:"ios",inputs:[{name:"name1",type:"text",placeholder:this.util.translate("Nombre categoria"),value:t.name}],buttons:[{text:this.util.translate("Cancelar"),role:"cancel",cssClass:"secondary",handler:()=>{}},{text:this.util.translate("Ok"),handler:e=>{if(e&&""!==e.name1){const i={id:t.id,name:e.name1};this.util.show(),this.api.post("categories/editList",i).then(t=>{this.util.hide(),t&&200===t.status?(this.getCategories(),h.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,onOpen:t=>{t.addEventListener("mouseenter",h.a.stopTimer),t.addEventListener("mouseleave",h.a.resumeTimer)}}).fire({icon:"success",title:this.util.translate("saved")})):this.util.errorToast(this.util.translate("Something went wrong"))},t=>{this.util.hide(),this.util.errorToast(this.util.translate("Something went wrong"))}).catch(t=>{this.util.hide(),this.util.errorToast(this.util.translate("Something went wrong"))})}}}]});yield e.present()})}deleteItem(t){h.a.fire({title:this.util.translate("Estas seguro?"),text:this.util.translate("Eliminar")+" "+t.name+" ?",icon:"question",showConfirmButton:!0,showCancelButton:!0,confirmButtonText:this.util.translate("Eliminae"),backdrop:!1,background:"white"}).then(e=>{if(e&&e.value){const e={id:t.id};this.util.show(),this.api.post("categories/deleteList",e).then(t=>{this.util.hide(),t&&200===t.status?(this.getCategories(),h.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,onOpen:t=>{t.addEventListener("mouseenter",h.a.stopTimer),t.addEventListener("mouseleave",h.a.resumeTimer)}}).fire({icon:"success",title:this.util.translate("deleted")})):this.util.errorToast(this.util.translate("Something went wrong"))},t=>{console.log(t),this.util.hide(),this.util.errorToast(this.util.translate("Something went wrong"))}).catch(t=>{console.log(t),this.util.hide(),this.util.errorToast(this.util.translate("Something went wrong"))})}})}hideStatus(t){const e={id:t.id,status:"1"===t.status?0:1};this.util.show(),this.api.post("categories/editList",e).then(t=>{console.log(t),this.util.hide(),t&&200===t.status?(this.getCategories(),h.a.mixin({toast:!0,position:"top-end",showConfirmButton:!1,timer:1e3,timerProgressBar:!0,onOpen:t=>{t.addEventListener("mouseenter",h.a.stopTimer),t.addEventListener("mouseleave",h.a.resumeTimer)}}).fire({icon:"success",title:this.util.translate("saved")})):this.util.errorToast(this.util.translate("Something went wrong"))},t=>{console.log(t),this.util.hide(),this.util.errorToast(this.util.translate("Something went wrong"))}).catch(t=>{console.log(t),this.util.hide(),this.util.errorToast(this.util.translate("Something went wrong"))})}}return t.\u0275fac=function(e){return new(e||t)(m.Lb(l.a),m.Lb(o.b),m.Lb(c.a),m.Lb(r.g))},t.\u0275cmp=m.Fb({type:t,selectors:[["app-category"]],decls:14,vars:4,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],["fill","clear","color","light","slot","end",3,"click"],["slot","icon-only","name","add"],[1,"ion-padding"],[1,"mainContent"],["class","ion-text-center",4,"ngIf"],[4,"ngFor","ngForOf"],["lines","none",4,"ngFor","ngForOf"],[1,"ion-text-center"],["animated",""],["animated","",2,"width","50%"],["animated","",2,"width","80%"],["animated","",2,"width","60%"],["lines","none"],["slot","end","name","create-outline","color","primary",2,"margin","0px 5px","font-size","25px",3,"click"],["slot","end","name","trash","color","primary",2,"margin","0px 5px","font-size","25px",3,"click"],["slot","end","color","primary",2,"margin","0px 5px","font-size","25px",3,"name","click"]],template:function(t,e){1&t&&(m.Ob(0,"ion-header"),m.Ob(1,"ion-toolbar",0),m.Ob(2,"ion-buttons",1),m.Ob(3,"ion-button",2),m.Wb("click",function(){return e.util.back()}),m.Mb(4,"ion-icon",3),m.Nb(),m.Nb(),m.Ob(5,"ion-title"),m.rc(6),m.Nb(),m.Ob(7,"ion-button",4),m.Wb("click",function(){return e.addNewCat()}),m.Mb(8,"ion-icon",5),m.Nb(),m.Nb(),m.Nb(),m.Ob(9,"ion-content",6),m.Ob(10,"div",7),m.qc(11,d,2,1,"h2",8),m.qc(12,g,10,0,"ion-item",9),m.qc(13,b,6,2,"ion-item",10),m.Nb(),m.Nb()),2&t&&(m.Ab(6),m.sc(e.util.translate("Categorias")),m.Ab(5),m.ec("ngIf",!(null!=e.dummy&&e.dummy.length||null!=e.categories&&e.categories.length)),m.Ab(1),m.ec("ngForOf",e.dummy),m.Ab(1),m.ec("ngForOf",e.categories))},directives:[o.o,o.W,o.g,o.f,o.p,o.V,o.j,n.i,n.h,o.r,o.U,o.K,o.t],styles:[".edt_icn[_ngcontent-%COMP%]{width:20px}"]}),t})()}];let w=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.Jb({type:t}),t.\u0275inj=m.Ib({imports:[[r.i.forChild(p)],r.i]}),t})();var f=i("PCNd");let O=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=m.Jb({type:t}),t.\u0275inj=m.Ib({imports:[[n.b,s.e,o.X,f.a,w]]}),t})()}}]);