(window.webpackJsonp=window.webpackJsonp||[]).push([[25],{"+duN":function(t,n,e){"use strict";e.r(n),e.d(n,"InboxPageModule",function(){return v});var i=e("ofXK"),o=e("3Pt+"),s=e("TEn/"),r=e("tyNb"),c=e("2Rin"),a=e("wd/R"),d=e("8RPc"),l=e("fXoL");function g(t,n){1&t&&(l.Ob(0,"div",11),l.Mb(1,"ion-spinner",12),l.Nb())}function b(t,n){if(1&t&&(l.Ob(0,"div",17),l.Ob(1,"div",18),l.Ob(2,"div",19),l.Ob(3,"ion-label"),l.rc(4),l.Nb(),l.Nb(),l.Nb(),l.Nb()),2&t){const t=l.Yb().$implicit;l.Ab(4),l.sc(t.message)}}function f(t,n){if(1&t&&(l.Ob(0,"div",20),l.Ob(1,"div",18),l.Ob(2,"div",19),l.Ob(3,"ion-label"),l.rc(4),l.Nb(),l.Nb(),l.Nb(),l.Nb()),2&t){const t=l.Yb().$implicit;l.Ab(4),l.sc(t.message)}}function p(t,n){if(1&t&&(l.Ob(0,"span"),l.qc(1,b,5,1,"div",15),l.qc(2,f,5,1,"div",16),l.Nb()),2&t){const t=n.$implicit,e=l.Yb(2);l.Ab(1),l.ec("ngIf",t.from_id!=e.uid),l.Ab(1),l.ec("ngIf",t.from_id==e.uid)}}function h(t,n){if(1&t&&(l.Ob(0,"div",13),l.qc(1,p,3,2,"span",14),l.Nb()),2&t){const t=l.Yb();l.Ab(1),l.ec("ngForOf",t.messages)}}function _(t,n){1&t&&(l.Ob(0,"div",21),l.Mb(1,"ion-spinner",22),l.Nb())}const m=[{path:"",component:(()=>{class t{constructor(t,n,e,i){this.route=t,this.navCtrl=n,this.api=e,this.util=i,this.msg="",this.messages=[],this.route.queryParams.subscribe(t=>{console.log(t),t&&t.id&&t.name?(this.uid=localStorage.getItem("uid"),this.id=t.id,this.loaded=!1,this.name=t.name,this.getChats(),this.interval=setInterval(()=>{console.log("calling in interval"),this.getChats()},12e3)):this.navCtrl.back()})}ionViewDidLeave(){console.log("leaae"),clearInterval(this.interval)}ngOnInit(){}getChats(){const t={id:localStorage.getItem("uid")+"_"+this.id,oid:this.id};this.api.post("chats/getById",t).then(t=>{console.log(t),this.loaded=!0,this.yourMessage=!0,t&&200===t.status&&(this.messages=t.data,this.myContent.scrollToBottom(300))},t=>{console.log(t),this.loaded=!0,this.yourMessage=!0,this.util.errorToast(this.util.translate("Something went wrong"))})}back(){this.navCtrl.back()}sendMessage(){if(console.log(this.msg),!this.msg||""===this.msg)return!1;const t=this.msg;this.msg="";const n={room_id:this.id,uid:localStorage.getItem("uid")+"_"+this.id,from_id:localStorage.getItem("uid"),message:t,message_type:"store",status:1,timestamp:a().format("YYYY-MM-DD HH:mm:ss")};this.yourMessage=!1,this.myContent.scrollToBottom(300),this.api.post("chats/save",n).then(t=>{console.log(t),t&&200===t.status?this.getChats():this.yourMessage=!0},t=>{console.log(t),this.yourMessage=!0,this.util.errorToast(this.util.translate("Something went wrong"))})}}return t.\u0275fac=function(n){return new(n||t)(l.Lb(r.a),l.Lb(s.cb),l.Lb(d.a),l.Lb(c.a))},t.\u0275cmp=l.Fb({type:t,selectors:[["app-inbox"]],viewQuery:function(t,n){if(1&t&&l.wc(s.j,1,s.j),2&t){let t;l.kc(t=l.Xb())&&(n.myContent=t.first)}},decls:16,vars:6,consts:[["color","primary"],["slot","start"],[3,"click"],["slot","icon-only","name","arrow-back"],["style","display: flex;flex-direction: column;justify-content: center;align-items: center;",4,"ngIf"],["class","main_content_div",4,"ngIf"],["style","display: flex;flex-direction: row-reverse;padding: 20px;",4,"ngIf"],[1,"footer_div"],["type","text",3,"ngModel","placeholder","ngModelChange","keyup.enter"],[1,"chat_div",3,"click"],["name","navigate"],[2,"display","flex","flex-direction","column","justify-content","center","align-items","center"],["color","primary","name","crescent"],[1,"main_content_div"],[4,"ngFor","ngForOf"],["class","left_div",4,"ngIf"],["class","right_div",4,"ngIf"],[1,"left_div"],[1,"inner_div"],[1,"msg_div"],[1,"right_div"],[2,"display","flex","flex-direction","row-reverse","padding","20px"],["name","dots"]],template:function(t,n){1&t&&(l.Ob(0,"ion-header"),l.Ob(1,"ion-toolbar",0),l.Ob(2,"ion-buttons",1),l.Ob(3,"ion-button",2),l.Wb("click",function(){return n.back()}),l.Mb(4,"ion-icon",3),l.Nb(),l.Nb(),l.Ob(5,"ion-title"),l.rc(6),l.Nb(),l.Nb(),l.Nb(),l.Ob(7,"ion-content"),l.qc(8,g,2,0,"div",4),l.qc(9,h,2,1,"div",5),l.qc(10,_,2,0,"div",6),l.Nb(),l.Ob(11,"ion-footer"),l.Ob(12,"div",7),l.Ob(13,"ion-input",8),l.Wb("ngModelChange",function(t){return n.msg=t})("keyup.enter",function(){return n.sendMessage()}),l.Nb(),l.Ob(14,"div",9),l.Wb("click",function(){return n.sendMessage()}),l.Mb(15,"ion-icon",10),l.Nb(),l.Nb(),l.Nb()),2&t&&(l.Ab(6),l.tc(" ",n.name," "),l.Ab(2),l.ec("ngIf",!n.loaded),l.Ab(1),l.ec("ngIf",n.loaded),l.Ab(1),l.ec("ngIf",!n.yourMessage&&n.loaded),l.Ab(3),l.ec("ngModel",n.msg)("placeholder",n.util.translate("Type Here..")))},directives:[s.o,s.W,s.g,s.f,s.p,s.V,s.j,i.i,s.n,s.q,s.jb,o.i,o.l,s.N,i.h,s.t],styles:[".header_div[_ngcontent-%COMP%]{width:100%;justify-content:space-between;height:65px;border-bottom:1px solid #d3d3d3;background-color:var(--ion-color-primary)}.header_div[_ngcontent-%COMP%], .header_div[_ngcontent-%COMP%]   .first_div[_ngcontent-%COMP%]{display:flex;flex-direction:row;align-items:center}.header_div[_ngcontent-%COMP%]   .first_div[_ngcontent-%COMP%]{color:#fff;font-weight:700}.header_div[_ngcontent-%COMP%]   .back_image[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:100%;background-position:50%;background-repeat:no-repeat;background-size:cover;min-width:45px;margin-right:10px}.header_div[_ngcontent-%COMP%]   .username[_ngcontent-%COMP%]{font-weight:600;color:#fff}.header_div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:#fff}.main_content_div[_ngcontent-%COMP%]{width:100%;padding:15px}.main_content_div[_ngcontent-%COMP%]   .back_image[_ngcontent-%COMP%]{width:45px;height:45px;border-radius:100%;background-position:50%;background-repeat:no-repeat;background-size:cover;min-width:45px}.main_content_div[_ngcontent-%COMP%]   .left_div[_ngcontent-%COMP%]{width:100%;display:flex;margin-bottom:15px}.main_content_div[_ngcontent-%COMP%]   .left_div[_ngcontent-%COMP%]   .inner_div[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:row;justify-content:flex-start}.main_content_div[_ngcontent-%COMP%]   .left_div[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]{background:#f0eff5;display:flex;align-items:center;padding:10px 15px;border-radius:25px;margin-left:5px}.main_content_div[_ngcontent-%COMP%]   .right_div[_ngcontent-%COMP%]{display:flex;width:100%;margin-bottom:15px;justify-content:flex-end}.main_content_div[_ngcontent-%COMP%]   .right_div[_ngcontent-%COMP%]   .inner_div[_ngcontent-%COMP%]{width:70%;display:flex;flex-direction:row;justify-content:flex-end}.main_content_div[_ngcontent-%COMP%]   .right_div[_ngcontent-%COMP%]   .msg_div[_ngcontent-%COMP%]{background:var(--ion-color-primary);display:flex;align-items:center;padding:10px 15px;border-radius:25px;margin-right:5px;color:#fff}ion-footer[_ngcontent-%COMP%]   .footer_div[_ngcontent-%COMP%]{display:flex;justify-content:space-between;align-items:center;padding:10px 20px}ion-footer[_ngcontent-%COMP%]   ion-input[_ngcontent-%COMP%]{border-radius:25px;border:1px solid #d3d3d3;--padding-start:8px}ion-footer[_ngcontent-%COMP%]   .chat_div[_ngcontent-%COMP%]{border-radius:50%;box-shadow:0 3px 6px rgba(0,0,0,.2);height:35px;width:35px;position:relative;margin-left:10px}ion-footer[_ngcontent-%COMP%]   .chat_div[_ngcontent-%COMP%]   ion-icon[_ngcontent-%COMP%]{color:var(--ion-color-primary);position:absolute;left:50%;top:50%;transform:translate(-55%,-45%);font-size:22px}"]}),t})()}];let u=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({imports:[[r.i.forChild(m)],r.i]}),t})(),v=(()=>{class t{}return t.\u0275fac=function(n){return new(n||t)},t.\u0275mod=l.Jb({type:t}),t.\u0275inj=l.Ib({imports:[[i.b,o.e,s.X,u]]}),t})()}}]);